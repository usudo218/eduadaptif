<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modul Algoritma & Pemrograman - EduAdaptif SMA</title>
    <style>
        :root {
            --warna-utama: #2563EB; 
            --warna-aksen: #059669; 
            --warna-merah: #EF4444;
            --warna-kuning: #F59E0B; 
            --warna-latar: #F3F4F6; 
            --warna-teks: #1F2937;  
            --latar-mentor: #DBEAFE; 
        }

        * { box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background-color: var(--warna-latar); display: flex; justify-content: center; align-items: flex-start; min-height: 100vh; margin: 0; padding: 20px; color: var(--warna-teks); }
        .app-container { background: white; width: 100%; max-width: 650px; border-radius: 16px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); overflow: hidden; margin-top: 20px; display: flex; flex-direction: column;}
        
        /* ==========================================
           DESAIN HEADER & TOMBOL MENU ELEGAN (BARU)
           ========================================== */
        .header { 
            background: var(--warna-utama); 
            color: white; 
            padding: 45px 20px 25px 20px; /* Padding atas agar tidak menabrak tombol */
            text-align: center; 
            position: relative;
        }
        .header h1 { margin: 0; font-size: 1.6rem; font-weight: 700; letter-spacing: 0.5px;}
        .header p { margin: 5px 0 0; font-size: 0.9rem; opacity: 0.9; }
        
        /* Desain Dasar Tombol Kapsul (Pill) dengan Efek Kaca */
        .back-btn, .logout-btn { 
            position: absolute; 
            top: 15px; 
            display: flex; 
            align-items: center; 
            gap: 6px; 
            font-size: 0.85rem; 
            font-weight: 600; 
            padding: 8px 16px; 
            border-radius: 50px; /* Membentuk kapsul */
            text-decoration: none; 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
            border: 1px solid rgba(255, 255, 255, 0.2); 
            backdrop-filter: blur(8px); /* Efek Kaca */
            -webkit-backdrop-filter: blur(8px);
            cursor: pointer; 
            font-family: inherit;
        }

        .back-btn { 
            left: 15px; 
            background: rgba(255, 255, 255, 0.1); 
            color: white; 
        }
        .back-btn:hover { 
            background: white; 
            color: var(--warna-utama); 
            transform: translateY(-2px); 
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15); 
            border-color: white;
        }

        .logout-btn { 
            right: 15px; 
            background: rgba(220, 38, 38, 0.15); 
            color: #FFF1F2; 
            border-color: rgba(220, 38, 38, 0.3);
        }
        .logout-btn:hover { 
            background: #DC2626; 
            color: white; 
            transform: translateY(-2px); 
            box-shadow: 0 6px 15px rgba(220, 38, 38, 0.3); 
            border-color: #DC2626;
        }

        @media (max-width: 480px) {
            .back-btn, .logout-btn { padding: 6px 12px; font-size: 0.75rem; top: 12px;}
            .header { padding-top: 55px; } 
            .header h1 { font-size: 1.3rem; }
        }
        /* ========================================== */

        .content { padding: 25px 20px; flex-grow: 1; }
        
        .login-card { background: white; padding: 30px 25px; border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.08); text-align: center; border: 1px solid #E5E7EB; }
        .login-illustration { width: 80%; max-width: 220px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;}
        .login-card h2 { color: var(--warna-utama); margin: 0 0 10px 0; font-size: 1.6rem;}
        .login-card p { color: #6B7280; margin-bottom: 25px; line-height: 1.5;}

        select.input-nama { width: 100%; padding: 15px; border: 2px solid #E5E7EB; border-radius: 12px; font-size: 1rem; margin-bottom: 15px; text-align: center; background-color: #F9FAFB; cursor: pointer; font-weight: 600; color: var(--warna-teks); transition: all 0.3s;}
        select.input-nama:focus { border-color: var(--warna-utama); background-color: white; outline: none; box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);}
        select.input-nama:disabled { background-color: #F3F4F6; color: #9CA3AF; cursor: not-allowed; border-color: #E5E7EB;}

        .mentor-box { display: flex; gap: 15px; background: var(--latar-mentor); padding: 15px; border-radius: 12px; margin-bottom: 25px; border-left: 5px solid var(--warna-utama); transition: all 0.3s; }
        .mentor-box.peringatan { border-left-color: var(--warna-kuning); background-color: #FEF3C7; }
        .mentor-avatar { font-size: 2.5rem; }
        .mentor-message { flex: 1; line-height: 1.5; }
        .mentor-name { font-weight: bold; color: var(--warna-utama); margin-bottom: 5px; display: block; }
        .mentor-name.peringatan { color: #D97706; }

        .area-konten { display: none; }
        .area-aktif { display: block; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .teks-materi { background: #f9fafb; padding: 25px; border-radius: 8px; border: 1px solid #e5e7eb; line-height: 1.7; text-align: justify; margin-bottom: 20px; font-size: 0.95rem; height: 500px; overflow-y: auto; }
        .teks-materi h3 { margin-top: 30px; color: var(--warna-utama); border-bottom: 2px solid #e5e7eb; padding-bottom: 8px;}
        .teks-materi h3:first-child { margin-top: 0; }
        .ilustrasi-mini { width: 100%; height: auto; min-height: 150px; background-color: #e5e7eb; object-fit: contain; border-radius: 8px; margin: 15px 0; border: 1px dashed #9ca3af; }
        .kode-snippet { background: #1F2937; color: #10B981; padding: 10px 15px; border-radius: 8px; font-family: 'Courier New', Courier, monospace; font-size: 0.9rem; overflow-x: auto; margin: 10px 0;}

        .question-area { text-align: center; }
        .question-area h2#teks-soal { font-size: 1.1rem; margin-bottom: 25px; color: #333; line-height: 1.5; text-align: left; font-weight: 600; }
        .opsi-container { display: flex; flex-direction: column; gap: 10px; margin-bottom: 20px; }
        .btn-opsi { background: white; border: 2px solid #D1D5DB; padding: 15px; border-radius: 8px; text-align: left; font-size: 1rem; cursor: pointer; transition: 0.2s; color: var(--warna-teks); }
        .btn-opsi:hover { background: #F3F4F6; border-color: var(--warna-utama); }
        .btn-opsi.terpilih { background: var(--latar-mentor); border-color: var(--warna-utama); color: var(--warna-utama); font-weight: bold; }

        .btn-action { width: 100%; background: var(--warna-utama); color: white; border: none; padding: 15px; border-radius: 8px; font-size: 1.1rem; font-weight: bold; cursor: pointer; margin-bottom: 10px; transition: 0.2s; }
        .btn-action:hover { background: #1D4ED8; }
        .btn-submit { background: var(--warna-aksen); }
        .btn-submit:hover { background: #059669; }
        .btn-ulang { background: var(--warna-merah); }
        .btn-ulang:hover { background: #DC2626; }
        .btn-bantuan { background: var(--warna-kuning); color: #fff; margin-bottom: 20px; }
        .btn-bantuan:hover { background: #D97706; }
        .btn-disabled { background: #9CA3AF; cursor: not-allowed; }

        .skor-box { text-align: center; margin: 20px 0; }
        .angka-skor { font-size: 4rem; font-weight: bold; color: var(--warna-utama); margin: 10px 0; }
        .teks-penalti { color: var(--warna-merah); font-weight: bold; font-size: 0.9rem; margin-top: 5px; }

        .footer { background-color: #f9fafb; color: #6b7280; text-align: center; padding: 15px; font-size: 0.85rem; border-top: 1px solid #e5e7eb; line-height: 1.5; }
    </style>
</head>
<body>

    <div class="app-container">
        <div class="header">
            <a href="index.html" class="back-btn" onclick="hapusProgres()">üîô Dashboard</a>
            
            <button id="btn-logout" class="logout-btn" onclick="logoutSiswa()" style="display: none;">üö™ Logout</button>

            <h1>Modul Algoritma & Pemrograman</h1>
            <p>Informatika Fase E - Kelas X</p>
        </div>

        <div class="content">
            <div id="area-login" class="area-konten area-aktif">
                <div class="login-card">
                    <img src="images/login-ap.png" alt="Ilustrasi Login Pemrograman" class="login-illustration" onerror="this.style.display='none'">
                    <h2>Selamat Datang, Programmer!</h2>
                    <p>Siap merangkai logika dan menulis baris kodemu sendiri? Pilih identitasmu untuk memulai.</p>
                    
                    <select id="pilih-kelas" class="input-nama" onchange="filterNama()">
                        <option value="">-- Pilih Kelas --</option>
                    </select>

                    <select id="pilih-nama" class="input-nama" disabled>
                        <option value="">-- Pilih Nama --</option>
                    </select>

                    <button class="btn-action btn-submit" onclick="simpanNamaSiswa()" style="margin-top: 10px;">üíª Mulai Koding</button>
                </div>
            </div>

            <div id="area-mentor-global" style="display: none;">
                <div class="mentor-box" id="kotak-mentor">
                    <div class="mentor-avatar" id="avatar-mentor">üë®‚Äçüè´</div>
                    <div class="mentor-message">
                        <span class="mentor-name" id="nama-mentor">Pak Agus :</span>
                        <span id="pesan-mentor">Selamat datang!</span>
                    </div>
                </div>
            </div>

            <div id="area-materi" class="area-konten">
                <div class="teks-materi">
                    <h3>1. Pengantar Algoritma & Flowchart</h3>
                    <p><strong>Algoritma</strong> adalah urutan langkah-langkah logis untuk menyelesaikan masalah. Sebelum menulis kode, programmer biasanya merancang alurnya menggunakan <strong>Flowchart (Diagram Alir)</strong>.</p>
                    <img src="images/flowchart.jpg" alt="Flowchart" class="ilustrasi-mini">
                    <p>Simbol penting Flowchart: <em>Oval</em> (Mulai/Selesai), <em>Jajar Genjang</em> (Input/Output), <em>Persegi Panjang</em> (Proses), dan <em>Belah Ketupat</em> (Keputusan).</p>
                    
                    <h3>2. Tipe Data, Variabel & Konstanta</h3>
                    <p><strong>Variabel</strong> ibarat sebuah kotak kosong yang bisa diisi dan diubah nilainya. <strong>Konstanta</strong> adalah kotak yang nilainya dikunci.</p>
                    <img src="images/variabel.jpg" alt="Variabel" class="ilustrasi-mini">
                    <p><strong>Tipe Data dasar:</strong></p>
                    <ul>
                        <li><strong>Integer:</strong> Angka bulat (misal: 10, -5).</li>
                        <li><strong>Float/Real:</strong> Angka desimal (misal: 3.14).</li>
                        <li><strong>String:</strong> Teks / kumpulan huruf.</li>
                        <li><strong>Boolean:</strong> Hanya memiliki 2 nilai: <em>True</em> atau <em>False</em>.</li>
                    </ul>

                    <h3>3. Struktur Percabangan (If-Else)</h3>
                    <p>Digunakan saat program harus mengambil keputusan berdasarkan suatu kondisi (True/False).</p>
                    <img src="images/percabangan.jpg" alt="Percabangan" class="ilustrasi-mini">
                    <div class="kode-snippet">
IF (nilai > 75) THEN<br>
&nbsp;&nbsp;&nbsp;Tulis "Lulus"<br>
ELSE<br>
&nbsp;&nbsp;&nbsp;Tulis "Remedial"<br>
END IF
                    </div>

                    <h3>4. Struktur Perulangan (Looping)</h3>
                    <p>Digunakan untuk menjalankan perintah yang sama berulang kali tanpa harus menulis kodenya berkali-kali.</p>
                    <img src="images/perulangan.jpg" alt="Perulangan" class="ilustrasi-mini">
                    <ul>
                        <li><strong>FOR:</strong> Digunakan jika <em>jumlah perulangan sudah diketahui pasti</em>.</li>
                        <li><strong>WHILE:</strong> Digunakan jika perulangan bergantung pada kondisi.</li>
                    </ul>

                    <h3>5. Array & Subprogram</h3>
                    <p><strong>Array (Larik)</strong> adalah struktur data untuk menyimpan banyak nilai bertipe sama di dalam satu variabel. Indeks Array selalu <strong>dimulai dari 0</strong>.</p>
                    <img src="images/array.jpg" alt="Array" class="ilustrasi-mini">
                    <p><strong>Subprogram:</strong> Memecah program besar. <strong>Fungsi</strong> mengembalikan nilai, sedangkan <strong>Prosedur</strong> hanya mengeksekusi aksi.</p>
                </div>
                <button class="btn-action" onclick="mulaiKuis()">Saya Paham, Mulai Tantangan Kuis!</button>
            </div>

            <div id="area-kuis" class="area-konten question-area">
                <h2 id="indikator-soal">Soal 1 dari 15</h2>
                <h2 id="teks-soal">Teks soal di sini...</h2>
                <div id="container-opsi" class="opsi-container"></div>
                
                <button class="btn-action btn-bantuan" id="tombol-bantuan" onclick="mintaBantuan()">üí° Perlu Bantuan Pak Agus?</button>
                <button class="btn-action btn-disabled" id="tombol-lanjut" onclick="simpanJawaban()" disabled>Pilih Jawaban Dulu</button>
            </div>

            <div id="area-hasil" class="area-konten">
                <div class="skor-box">
                    <h3>Skor Ketuntasan (Syarat: 100)</h3>
                    <div class="angka-skor" id="teks-skor">0</div>
                    <p id="keterangan-hasil">Menghitung skor...</p>
                    <p class="teks-penalti" id="teks-penalti" style="display: none;">(Skor dikurangi karena menggunakan tombol bantuan)</p>
                </div>
                <button id="tombol-ulang" class="btn-action btn-ulang" style="display: none;" onclick="ulangiMateri()">Baca Ulang Materi & Remedial</button>
                <button id="tombol-selesai" class="btn-action btn-submit" style="display: none;" onclick="kembaliKeDashboard()">Selesai & Kembali ke Menu</button>
            </div>
        </div>

        <div class="footer">
            Design By Agus Suyatno, S.Kom<br>
            SMA Negeri 1 Muncar &copy; 2026
        </div>
    </div>

    <script src="soal-ap.js"></script>
    <script src="siswa.js"></script>

    <script>
        let namaSiswa = ""; 
        let kelasSiswa = "";
        let daftarSoalBerjalan = [];
        let indeksSoalSekarang = 0;
        let jumlahBenar = 0;
        let jawabanTerpilihSementara = null;
        
        let bantuanPerSoalDipakai = false; 
        let totalKaliBantuan = 0;
        let jumlahPercobaan = 0; 
        const POIN_PENALTI_BANTUAN = 5; 
        const KKM = 100; 

        // SAYA SUDAH MEMASUKKAN LINK GOOGLE SCRIPT ANDA DI SINI
        const URL_APPS_SCRIPT = "https://script.google.com/macros/s/AKfycbzPcanC73JEFcHGfgKWDRfaUTNaztpOGZSmM61VqV_BfkiEYWebWNSHnZTE7Zx-4XDn/exec"; 

        function inisialisasiDropdown() {
            if(typeof SISWA_BARU === 'undefined') { alert("File siswa.js tidak terbaca!"); return; }
            const unikKelas = [...new Set(SISWA_BARU.map(s => s.kelas))].sort();
            const selectKelas = document.getElementById('pilih-kelas');
            unikKelas.forEach(k => {
                let opt = document.createElement('option'); opt.value = k; opt.innerText = k; selectKelas.appendChild(opt);
            });
        }

        function filterNama() {
            const kelasDipilih = document.getElementById('pilih-kelas').value;
            const selectNama = document.getElementById('pilih-nama');
            selectNama.innerHTML = '<option value="">-- Pilih Nama --</option>';
            if(kelasDipilih === "") { selectNama.disabled = true; return; }
            selectNama.disabled = false;
            const siswaKelas = SISWA_BARU.filter(s => s.kelas === kelasDipilih).sort((a,b) => a.nama.localeCompare(b.nama));
            siswaKelas.forEach(s => {
                let opt = document.createElement('option'); opt.value = s.nama; opt.innerText = s.nama; selectNama.appendChild(opt);
            });
        }

        function simpanProgres(faseSistem) {
            const progresState = { nama: namaSiswa, kelas: kelasSiswa, fase: faseSistem, soal: daftarSoalBerjalan, indeks: indeksSoalSekarang, benar: jumlahBenar, bantuan: totalKaliBantuan, percobaan: jumlahPercobaan };
            localStorage.setItem('eduAdaptif_ModulAP', JSON.stringify(progresState));
        }

        function muatProgres() {
            const simpanan = localStorage.getItem('eduAdaptif_ModulAP');
            if(simpanan) {
                const p = JSON.parse(simpanan); namaSiswa = p.nama; kelasSiswa = p.kelas; daftarSoalBerjalan = p.soal; indeksSoalSekarang = p.indeks; jumlahBenar = p.benar; totalKaliBantuan = p.bantuan; jumlahPercobaan = p.percobaan;
                
                document.getElementById('area-mentor-global').style.display = "block";
                document.getElementById('btn-logout').style.display = "block"; // Munculkan tombol logout

                if (p.fase === 'materi') { tampilkanMateri(); } else if (p.fase === 'kuis') { ubahTampilan('area-kuis'); aturMentor("normal"); document.getElementById('pesan-mentor').innerText = `Halo, ${namaSiswa}! Ayo lanjutkan kuisnya.`; muatSoal(); }
            } else { inisialisasiDropdown(); }
        }

        function hapusProgres() { localStorage.removeItem('eduAdaptif_ModulAP'); }

        // FUNGSI LOGOUT BARU
        function logoutSiswa() {
            if(confirm("Yakin ingin ganti akun? Progres kuis saat ini akan diulang dari awal.")) {
                hapusProgres();
                window.location.reload();
            }
        }

        window.onload = muatProgres;

        function simpanNamaSiswa() {
            kelasSiswa = document.getElementById('pilih-kelas').value;
            namaSiswa = document.getElementById('pilih-nama').value;
            if (kelasSiswa === "" || namaSiswa === "") { alert("Pilih kelas dan namamu dulu ya!"); return; }
            
            document.getElementById('area-mentor-global').style.display = "block"; 
            document.getElementById('btn-logout').style.display = "block"; // Munculkan tombol logout
            tampilkanMateri();
        }

        function aturMentor(mode) {
            const kotak = document.getElementById('kotak-mentor'); const nama = document.getElementById('nama-mentor');
            if(mode === "normal") { kotak.classList.remove('peringatan'); nama.classList.remove('peringatan'); document.getElementById('avatar-mentor').innerText = "üë®‚Äçüè´"; } 
            else if (mode === "bantuan") { kotak.classList.add('peringatan'); nama.classList.add('peringatan'); document.getElementById('avatar-mentor').innerText = "üí°"; }
        }

        function tampilkanMateri() {
            ubahTampilan('area-materi'); aturMentor("normal");
            document.getElementById('pesan-mentor').innerText = `Halo, ${namaSiswa} dari ${kelasSiswa}! Silakan pelajari modul ini. Bapak tunggu di sesi kuis!`;
            indeksSoalSekarang = 0; jumlahBenar = 0; totalKaliBantuan = 0; simpanProgres('materi'); 
        }

        function mulaiKuis() {
            ubahTampilan('area-kuis'); aturMentor("normal");
            document.getElementById('pesan-mentor').innerText = `Uji logikamu, ${namaSiswa}! Jawab 15 soal dengan teliti.`;
            jumlahPercobaan++; 
            if(typeof daftarSoalAsli === 'undefined') { alert("File soal-ap.js tidak terbaca!"); return; }
            daftarSoalBerjalan = [...daftarSoalAsli];
            for (let i = daftarSoalBerjalan.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [daftarSoalBerjalan[i], daftarSoalBerjalan[j]] = [daftarSoalBerjalan[j], daftarSoalBerjalan[i]]; }
            simpanProgres('kuis'); muatSoal();
        }

        function muatSoal() {
            let soalAktif = daftarSoalBerjalan[indeksSoalSekarang];
            document.getElementById('indikator-soal').innerText = `Soal ${indeksSoalSekarang + 1} dari ${daftarSoalBerjalan.length}`;
            document.getElementById('teks-soal').innerText = soalAktif.p;
            jawabanTerpilihSementara = null; bantuanPerSoalDipakai = false;
            const btnBantuan = document.getElementById('tombol-bantuan'); btnBantuan.style.display = "block"; btnBantuan.disabled = false; btnBantuan.classList.remove('btn-disabled'); btnBantuan.innerText = "üí° Perlu Bantuan Pak Agus?";
            aturMentor("normal"); document.getElementById('pesan-mentor').innerText = `Baca perlahan algoritmanya. Kamu pasti bisa!`;
            const tombolLanjut = document.getElementById('tombol-lanjut'); tombolLanjut.innerText = (indeksSoalSekarang === daftarSoalBerjalan.length - 1) ? "Kirim Semua Jawaban" : "Lanjut ke Soal Berikutnya"; tombolLanjut.classList.add('btn-disabled'); tombolLanjut.classList.remove('btn-submit'); tombolLanjut.disabled = true;
            const containerOpsi = document.getElementById('container-opsi'); containerOpsi.innerHTML = ''; 
            soalAktif.o.forEach((opsiTeks, index) => { const btn = document.createElement('button'); btn.className = 'btn-opsi'; btn.innerText = opsiTeks; btn.onclick = () => pilihOpsi(index, btn); containerOpsi.appendChild(btn); });
        }

        function mintaBantuan() {
            if(bantuanPerSoalDipakai) return; 
            bantuanPerSoalDipakai = true; totalKaliBantuan++;
            let soalAktif = daftarSoalBerjalan[indeksSoalSekarang];
            aturMentor("bantuan"); document.getElementById('pesan-mentor').innerText = `PETUNJUK: ${soalAktif.b} (Peringatan: Penalti -${POIN_PENALTI_BANTUAN} poin).`;
            const btnBantuan = document.getElementById('tombol-bantuan'); btnBantuan.disabled = true; btnBantuan.classList.add('btn-disabled'); btnBantuan.innerText = "‚úîÔ∏è Bantuan Telah Diberikan";
            simpanProgres('kuis'); 
        }

        function pilihOpsi(indexPilihan, tombolDiklik) {
            document.querySelectorAll('.btn-opsi').forEach(btn => btn.classList.remove('terpilih'));
            tombolDiklik.classList.add('terpilih'); jawabanTerpilihSementara = indexPilihan;
            const tombolLanjut = document.getElementById('tombol-lanjut'); tombolLanjut.classList.remove('btn-disabled'); tombolLanjut.classList.add('btn-submit'); tombolLanjut.disabled = false;
        }

        function simpanJawaban() {
            if (jawabanTerpilihSementara === null) return; 
            if (jawabanTerpilihSementara.toString() === daftarSoalBerjalan[indeksSoalSekarang].k.toString()) { jumlahBenar++; }
            indeksSoalSekarang++;
            if (indeksSoalSekarang < daftarSoalBerjalan.length) { simpanProgres('kuis'); muatSoal(); } else { hapusProgres(); tampilkanHasil(); }
        }

        function tampilkanHasil() {
            ubahTampilan('area-hasil'); aturMentor("normal");
            let skorAwal = Math.round((jumlahBenar / daftarSoalBerjalan.length) * 100);
            let totalPenalti = totalKaliBantuan * POIN_PENALTI_BANTUAN;
            let skorAkhir = skorAwal - totalPenalti; if (skorAkhir < 0) skorAkhir = 0;
            document.getElementById('teks-skor').innerText = skorAkhir;
            let teksPenaltiEl = document.getElementById('teks-penalti');
            if (totalKaliBantuan > 0) { teksPenaltiEl.style.display = "block"; teksPenaltiEl.innerText = `(Terdapat penalti -${totalPenalti} poin karena menekan bantuan ${totalKaliBantuan} kali)`; } else { teksPenaltiEl.style.display = "none"; }
            let statusSiswa = ""; 
            if (skorAkhir >= KKM) {
                document.getElementById('pesan-mentor').innerText = `Logikamu tajam, ${namaSiswa}! Kamu menguasai pemrograman TANPA minta bantuan sama sekali.`;
                document.getElementById('keterangan-hasil').innerText = "Status: TUNTAS (Mastery Achieved).";
                document.getElementById('tombol-selesai').style.display = "block"; document.getElementById('tombol-ulang').style.display = "none"; statusSiswa = "TUNTAS";
            } else {
                document.getElementById('pesan-mentor').innerText = (skorAwal === 100 && totalKaliBantuan > 0) ? `Skor awal 100, tapi kena penalti bantuan. Ayo remedial agar tuntas mandiri!` : `Skormu ${skorAkhir}. Masih ada bug logika. Ayo remedial!`;
                document.getElementById('keterangan-hasil').innerText = "Status: BELUM TUNTAS. Silakan remedial.";
                document.getElementById('tombol-ulang').style.display = "block"; document.getElementById('tombol-selesai').style.display = "none"; statusSiswa = "REMEDIAL";
            }
            if(URL_APPS_SCRIPT !== "https://script.google.com/macros/s/AKfycbzPcanC73JEFcHGfgKWDRfaUTNaztpOGZSmM61VqV_BfkiEYWebWNSHnZTE7Zx-4XDn/exec") {
                const dataKirim = new URLSearchParams({ namaSiswa: namaSiswa + " (" + kelasSiswa + ")", modul: "Algoritma & Pemrograman (AP)", skor: skorAkhir, bantuan: totalKaliBantuan, percobaan: jumlahPercobaan, status: statusSiswa });
                fetch(URL_APPS_SCRIPT, { method: 'POST', body: dataKirim }).then(response => { console.log("Data terekam."); }).catch(error => { console.error("Gagal kirim:", error); });
            }
        }

        function ulangiMateri() { tampilkanMateri(); }
        function kembaliKeDashboard() { hapusProgres(); window.location.href = "index.html"; }
        function ubahTampilan(idArea) { document.querySelectorAll('.area-konten').forEach(area => area.className = 'area-konten'); document.getElementById(idArea).className = 'area-konten area-aktif'; }
    </script>
</body>
</html>
