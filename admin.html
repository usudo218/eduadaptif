<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Panel Admin - ELANG DIGITAL</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f1f5f9; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .box { background: white; padding: 40px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); text-align: center; width: 100%; max-width: 400px; }
        .img-admin { width: 100px; border-radius: 50%; border: 3px solid #4f46e5; margin-bottom: 20px; }
        input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        button { width: 100%; padding: 12px; background: #4f46e5; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; }
        button:hover { background: #4338ca; }
        .error-msg { color: #ef4444; font-size: 0.85rem; margin-top: 10px; display: none; }
    </style>
</head>
<body>

<div class="box" id="login-box">
    <img src="images/Pak-Agus.png" class="img-admin" alt="Admin">
    <h2>Login Admin</h2>
    <p>Silakan masukkan kode akses</p>
    <input type="password" id="pass" placeholder="Kode Akses (Contoh: ADMIN2026)">
    <button onclick="cekLogin()">Masuk Dashboard</button>
    <div id="pesan-salah" class="error-msg">Kode Akses Salah!</div>
</div>

<script>
    // 1. KODE AKSES (Sesuaikan dengan keinginan Anda)
    const KODE_RAHASIA = "ADMIN2026";

    // 2. TEMPEL URL WEB APP (HASIL DEPLOY) DI SINI
    const URL_WEB_APP = "https://script.google.com/macros/s/AKfycbywzkacgm1ChC2PPvDPU9w4JIvGK8wMZiDBuRWKmdv8qFtSmDhUUDsahE6Azypztow0/exec";

    function cekLogin() {
        const input = document.getElementById('pass').value;
        const pesan = document.getElementById('pesan-salah');

        if (input === KODE_RAHASIA) {
            // Jika benar, simpan status login sederhana dan pindah ke halaman data
            // Untuk tes awal, kita langsung arahkan ke fungsi muat data atau alert sukses
            alert("Login Berhasil! Menyambungkan ke database...");
            
            // Simpan status di memori browser agar tidak login ulang terus
            sessionStorage.setItem("admin_masuk", "ya");
            
            // Ambil data untuk memastikan koneksi Web App aktif
            tesKoneksi();
        } else {
            pesan.style.display = "block";
        }
    }

    async function tesKoneksi() {
        try {
            const res = await fetch(URL_WEB_APP + "?action=readData", { redirect: 'follow' });
            if(res.ok) {
                alert("Koneksi ke Google Sheets SUKSES!");
                // Di sini Anda bisa memunculkan tabel data siswa
            }
        } catch (err) {
            alert("Login Benar, TAPI Gagal Konek ke Google Sheets. Cek Izin Deployment Anda!");
        }
    }
</script>

</body>
</html>
